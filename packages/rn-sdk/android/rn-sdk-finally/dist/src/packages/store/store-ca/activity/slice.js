var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.resetActivity=exports.removeFailedActivity=exports.default=exports.addFailedActivity=exports.activitySlice=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _toolkit=require("@reduxjs/toolkit");var _action=require("./action");var _activity=require("../../../utils/activity");var initialState={activityMap:{},isFetchingActivities:false,failedActivityMap:{},isLoading:false};var activitySlice=exports.activitySlice=(0,_toolkit.createSlice)({name:'activity',initialState:initialState,reducers:{addFailedActivity:function addFailedActivity(state,_ref){var payload=_ref.payload;state.failedActivityMap[payload==null?void 0:payload.transactionId]=payload;},removeFailedActivity:function removeFailedActivity(state,_ref2){var payload=_ref2.payload;delete state.failedActivityMap[payload];},resetActivity:function resetActivity(){return initialState;}},extraReducers:function extraReducers(builder){builder.addCase(_action.getActivityListAsync.fulfilled,function(state,action){var _action$payload=action.payload,data=_action$payload.data,totalRecordCount=_action$payload.totalRecordCount,skipCount=_action$payload.skipCount,maxResultCount=_action$payload.maxResultCount,chainId=_action$payload.chainId,symbol=_action$payload.symbol;var currentMapKey=(0,_activity.getCurrentActivityMapKey)(chainId,symbol);if(!state.activityMap)state.activityMap={};state.activityMap[currentMapKey]={data:skipCount===0?data:[].concat((0,_toConsumableArray2.default)(state.activityMap[currentMapKey].data),(0,_toConsumableArray2.default)(data)),totalRecordCount:totalRecordCount,skipCount:skipCount,maxResultCount:maxResultCount,chainId:chainId,symbol:symbol};state.isLoading=false;});builder.addCase(_action.getActivityListAsync.pending,function(state){state.isLoading=true;});builder.addCase(_action.getActivityListAsync.rejected,function(state){state.isLoading=false;});}});var _activitySlice$action=activitySlice.actions,addFailedActivity=exports.addFailedActivity=_activitySlice$action.addFailedActivity,removeFailedActivity=exports.removeFailedActivity=_activitySlice$action.removeFailedActivity,resetActivity=exports.resetActivity=_activitySlice$action.resetActivity;var _default=exports.default=activitySlice;