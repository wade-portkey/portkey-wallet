var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _memoize=_interopRequireDefault(require("lodash/memoize"));var _constants=require("../constants");var getFetchWithTimeout=(0,_memoize.default)(function(){var timeout=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_constants.SECOND*30;if(!Number.isInteger(timeout)||timeout<1){throw new Error('Must specify positive integer timeout.');}return function(){var _fetch2=(0,_asyncToGenerator2.default)(function*(url,opts){var abortController=new window.AbortController();var signal=abortController.signal;var f=window.fetch(url,Object.assign({},opts!=null?opts:{},{signal:signal}));var timer=setTimeout(function(){return abortController.abort();},timeout);try{var res=yield f;clearTimeout(timer);return res;}catch(e){clearTimeout(timer);throw e;}});function _fetch(_x,_x2){return _fetch2.apply(this,arguments);}return _fetch;}();});var _default=exports.default=getFetchWithTimeout;