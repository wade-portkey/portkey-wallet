var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.getTokenInfo=exports.getLoginGuardianAccount=exports.getCAHolderManagerInfo=exports.getCAHolderByManager=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _apollo=require("./apollo");var _caHolderManagerInfo=require("./__generated__/hooks/caHolderManagerInfo");var _loginGuardianInfo=require("./__generated__/hooks/loginGuardianInfo");var _tokenInfo=require("./__generated__/hooks/tokenInfo");var getCAHolderManagerInfo=exports.getCAHolderManagerInfo=function(){var _ref=(0,_asyncToGenerator2.default)(function*(network,params){var apolloClient=(0,_apollo.getApolloClient)(network);var result=yield apolloClient.query({query:_caHolderManagerInfo.CaHolderManagerInfoDocument,variables:params});return result;});return function getCAHolderManagerInfo(_x,_x2){return _ref.apply(this,arguments);};}();var getLoginGuardianAccount=exports.getLoginGuardianAccount=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(network,params){var apolloClient=(0,_apollo.getApolloClient)(network);var result=yield apolloClient.query({query:_loginGuardianInfo.LoginGuardianInfoDocument,variables:params});return result;});return function getLoginGuardianAccount(_x3,_x4){return _ref2.apply(this,arguments);};}();var getTokenInfo=exports.getTokenInfo=function(){var _ref3=(0,_asyncToGenerator2.default)(function*(network,params){var apolloClient=(0,_apollo.getApolloClient)(network);var result=yield apolloClient.query({query:_tokenInfo.TokenInfoDocument,variables:params});return result;});return function getTokenInfo(_x5,_x6){return _ref3.apply(this,arguments);};}();var getCAHolderByManager=exports.getCAHolderByManager=function(){var _ref4=(0,_asyncToGenerator2.default)(function*(network,params){var caResult=yield getCAHolderManagerInfo(network,{dto:Object.assign({},params,{skipCount:0,maxResultCount:1})});if(caResult.error)throw caResult.error;var result={caHolderManagerInfo:caResult.data.caHolderManagerInfo?caResult.data.caHolderManagerInfo.map(function(item){return Object.assign({},item,{loginGuardianInfo:[]});}):[]};if(result.caHolderManagerInfo.length>0){var caHash=result.caHolderManagerInfo[0].caHash;var guardianResult=yield getLoginGuardianAccount(network,{dto:{caHash:caHash,skipCount:0,maxResultCount:100}});if(guardianResult.error)throw guardianResult.error;if(guardianResult.data.loginGuardianInfo){result.caHolderManagerInfo[0].loginGuardianInfo=guardianResult.data.loginGuardianInfo;}else{result.caHolderManagerInfo[0].loginGuardianInfo=[];}}return result;});return function getCAHolderByManager(_x7,_x8){return _ref4.apply(this,arguments);};}();