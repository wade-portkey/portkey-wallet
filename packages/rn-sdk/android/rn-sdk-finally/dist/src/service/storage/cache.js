var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.handleCachedValue=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _index=require("./index");var handleCachedValue=exports.handleCachedValue=function(){var _ref=(0,_asyncToGenerator2.default)(function*(strategy){var target=strategy.target,getIdentifier=strategy.getIdentifier,getValueIfNonExist=strategy.getValueIfNonExist,valueExpireStrategy=strategy.valueExpireStrategy;var identifier=yield getIdentifier();var cache=target==='PERMANENT'?yield _index.GlobalStorage.getString(identifier):yield _index.TempStorage.getString(identifier);if(cache&&(!valueExpireStrategy||!(yield valueExpireStrategy()))){return JSON.parse(cache);}var value=yield getValueIfNonExist();if(value){var valueStr=JSON.stringify(value);target==='PERMANENT'?_index.GlobalStorage.set(identifier,valueStr):_index.TempStorage.set(identifier,valueStr);}return value;});return function handleCachedValue(_x){return _ref.apply(this,arguments);};}();