var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useToken=exports.useSymbolImages=exports.useMarketTokenListInCurrentChain=exports.useIsFetchingTokenList=exports.useFetchSymbolImages=exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _=require("./..");var _action=require("packages/types/store-ca/tokenManagement/action");var _react=require("react");var _network=require("./network");var _apiDid=require("../../api/api-did");var useToken=exports.useToken=function useToken(){var dispatch=(0,_.useAppCommonDispatch)();var currentNetworkInfo=(0,_network.useCurrentNetworkInfo)();var tokenState=(0,_.useAppCASelector)(function(state){return state.tokenManagement;});var fetchTokenList=(0,_react.useCallback)(function(params){dispatch((0,_action.fetchAllTokenListAsync)(Object.assign({},params)));},[dispatch]);var displayUserToken=(0,_react.useCallback)(function(){var _ref2=(0,_asyncToGenerator2.default)(function*(_ref){var tokenItem=_ref.tokenItem,keyword=_ref.keyword,chainIdArray=_ref.chainIdArray;yield _apiDid.request.token.displayUserToken({baseURL:currentNetworkInfo.apiUrl,resourceUrl:tokenItem.userTokenId+"/display",params:{isDisplay:!tokenItem.isAdded}});setTimeout(function(){dispatch((0,_action.fetchAllTokenListAsync)({keyword:keyword,chainIdArray:chainIdArray}));},1000);});return function(_x){return _ref2.apply(this,arguments);};}(),[currentNetworkInfo.apiUrl,dispatch]);var tokenStoreFuncs={fetchTokenList:fetchTokenList,displayUserToken:displayUserToken};return[tokenState,tokenStoreFuncs];};var useMarketTokenListInCurrentChain=exports.useMarketTokenListInCurrentChain=function useMarketTokenListInCurrentChain(){var _useAppCASelector=(0,_.useAppCASelector)(function(state){return state.tokenManagement;}),tokenDataShowInMarket=_useAppCASelector.tokenDataShowInMarket;return(0,_react.useMemo)(function(){return tokenDataShowInMarket;},[tokenDataShowInMarket]);};var useIsFetchingTokenList=exports.useIsFetchingTokenList=function useIsFetchingTokenList(){var _useAppCASelector2=(0,_.useAppCASelector)(function(state){return state.tokenManagement;}),isFetching=_useAppCASelector2.isFetching;return(0,_react.useMemo)(function(){return isFetching;},[isFetching]);};var useFetchSymbolImages=exports.useFetchSymbolImages=function useFetchSymbolImages(){var dispatch=(0,_.useAppCommonDispatch)();(0,_react.useEffect)(function(){dispatch((0,_action.getSymbolImagesAsync)());},[dispatch]);};var useSymbolImages=exports.useSymbolImages=function useSymbolImages(){var _useAppCASelector3=(0,_.useAppCASelector)(function(state){return state.tokenManagement;}),symbolImages=_useAppCASelector3.symbolImages;return(0,_react.useMemo)(function(){return symbolImages;},[symbolImages]);};var _default=exports.default=useToken;