var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.messageParser=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var imageMessageParser=function imageMessageParser(str){str=str.replaceAll(/,/g,';');var result={};var pairs=str.split(';');pairs.forEach(function(pair){var _pair$split=pair.split(':'),_pair$split2=(0,_slicedToArray2.default)(_pair$split,2),key=_pair$split2[0],value=_pair$split2[1];result[key]=value;});return{type:result['type']||'',action:result['action']||'',imgUrl:result['p1(Text)']||'',s3Key:result['p2(Text)']||'',thumbImgUrl:result['p3(Text)'],thumbS3Key:result['p4(Text)'],width:result['p5(Text)'],height:result['p6(Text)']};};var messageParser=exports.messageParser=function messageParser(message){switch(message.type){case'TEXT':return Object.assign({},message,{parsedContent:message.content});case'IMAGE':return Object.assign({},message,{parsedContent:imageMessageParser(message.content)});default:return Object.assign({},message,{unidentified:true});}};