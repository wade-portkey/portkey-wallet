var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=AccountSettings;var _react=_interopRequireWildcard(require("react"));var _PageContainer=_interopRequireDefault(require("../../../components/PageContainer"));var _useBiometrics=_interopRequireDefault(require("../../../hooks/useBiometrics"));var _reactNative=require("react-native");var _theme=require("../../../assets/theme");var _hooks=require("../../../i18n/hooks");var _MenuItem=_interopRequireDefault(require("../components/MenuItem"));var _unit=require("../../../utils/unit");var _BaseContainerContext=_interopRequireDefault(require("../../../model/container/BaseContainerContext"));var _entries=require("../../../config/entries");var _UseBaseContainer=_interopRequireDefault(require("../../../model/container/UseBaseContainer"));var _useEffectOnce=_interopRequireDefault(require("../../../hooks/useEffectOnce"));var _core=require("../../../model/verify/core");var _nativeModules=require("../../../service/native-modules");var _CommonToast=_interopRequireDefault(require("../../../components/CommonToast"));var _jsxFileName="/Users/fengfeiyang/aelf/portkey-wallet/packages/rn-sdk/android/rn-sdk-finally/src/pages/My/AccountSettings/index.tsx";function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}function AccountSettings(){var _this=this;var biometricsReady=(0,_useBiometrics.default)();var _useBaseContainer=(0,_UseBaseContainer.default)({entryName:_entries.PortkeyEntries.ACCOUNT_SETTING_ENTRY,onNewIntent:function onNewIntent(params){console.log('params.modified',params.modified);if(params.modified){console.log('params.modified if');_CommonToast.default.success(t('Modified Successfully'));}}}),navigationTo=_useBaseContainer.navigateTo,onFinish=_useBaseContainer.onFinish;var _useLanguage=(0,_hooks.useLanguage)(),t=_useLanguage.t;var list=(0,_react.useMemo)(function(){var _list=[{name:'CheckPin',label:'Change Pin',sort:1}];biometricsReady&&_list.push({name:'Biometric',label:'Biometric Authentication',sort:2});return _list.sort(function(a,b){return a.sort-b.sort;});},[biometricsReady]);var navigateNextPage=(0,_react.useCallback)(function(menuName){console.log('menuName',menuName);if(menuName==='CheckPin'){navigationTo(_entries.PortkeyEntries.CHECK_PIN,{targetScene:'changePin'});}else if(menuName==='Biometric'){navigationTo(_entries.PortkeyEntries.BIOMETRIC_SWITCH_ENTRY,{});}},[navigationTo]);(0,_useEffectOnce.default)(function(){(0,_core.isWalletUnlocked)().then(function(status){if(!status){onFinish({status:'fail',data:{msg:'wallet is not unlocked'}});console.log('wallet is not unlocked');_nativeModules.PortkeyModulesEntity.NativeWrapperModule.onError(_entries.PortkeyEntries.ACCOUNT_SETTING_ENTRY,'wallet is not unlocked',{});}});});return _react.default.createElement(_BaseContainerContext.default.Provider,{value:{entryName:_entries.PortkeyEntries.ACCOUNT_SETTING_ENTRY},__self:this,__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:5}},_react.default.createElement(_PageContainer.default,{containerStyles:styles.containerStyles,safeAreaColor:['blue','gray'],titleDom:t('Account Setting'),__self:this,__source:{fileName:_jsxFileName,lineNumber:81,columnNumber:7}},list.map(function(item){return _react.default.createElement(_MenuItem.default,{style:styles.itemWrap,key:item.name,title:t(item.label),onPress:function onPress(){return navigateNextPage(item.name);},__self:_this,__source:{fileName:_jsxFileName,lineNumber:86,columnNumber:11}});})));}var styles=_reactNative.StyleSheet.create({containerStyles:{backgroundColor:_theme.defaultColors.bg4},itemWrap:{marginTop:(0,_unit.pTd)(24),marginBottom:0}});