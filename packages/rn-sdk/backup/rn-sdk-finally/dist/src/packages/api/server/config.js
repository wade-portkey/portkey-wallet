var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceInit=void 0;var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _fetch=require("../../utils/fetch");var _utils=require("../utils");var _excluded=["method","url","baseURL"];var ServiceInit=exports.ServiceInit=function(){function ServiceInit(){var _this=this;(0,_classCallCheck2.default)(this,ServiceInit);(0,_defineProperty2.default)(this,"defaultConfig",void 0);(0,_defineProperty2.default)(this,"parseRouter",function(name,urlObj){var obj=_this[name]={};Object.keys(urlObj).forEach(function(key){obj[key]=_this.send.bind(_this,urlObj[key]);});});(0,_defineProperty2.default)(this,"send",function(base,config){var _ref=(0,_utils.getRequestConfig)(base,config,_this.defaultConfig)||{},_ref$method=_ref.method,method=_ref$method===void 0?'POST':_ref$method,url=_ref.url,baseURL=_ref.baseURL,fetchConfig=(0,_objectWithoutProperties2.default)(_ref,_excluded);var _url=url||(typeof base==='string'?base:base.target);var URL=(0,_utils.spliceUrl)(baseURL||'',_url);return(0,_fetch.customFetch)(URL,Object.assign({},fetchConfig,{method:method}));});this.defaultConfig={};}(0,_createClass2.default)(ServiceInit,[{key:"setDefaultConfig",value:function setDefaultConfig(defaultConfig){this.defaultConfig=defaultConfig;}},{key:"set",value:function set(key,value){this.defaultConfig[key]=value;}}]);return ServiceInit;}();