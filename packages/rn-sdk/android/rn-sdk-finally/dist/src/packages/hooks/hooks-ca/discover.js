var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useBookmarkList=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _apiDid=require("../../api/api-did");var _=require("./..");var _network=require("./network");var _slice=require("packages/types/store-ca/discover/slice");var _discover=require("../../constants/constants-ca/discover");var _react=require("react");var useBookmarkList=exports.useBookmarkList=function useBookmarkList(){var _useCurrentNetworkInf=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf.networkType;var dispatch=(0,_.useAppCommonDispatch)();var _useAppCASelector=(0,_.useAppCASelector)(function(state){return state.discover;}),discoverMap=_useAppCASelector.discoverMap;var clean=(0,_react.useCallback)(function(){dispatch((0,_slice.cleanBookmarkList)(networkType));},[dispatch,networkType]);var refresh=(0,_react.useCallback)((0,_asyncToGenerator2.default)(function*(){var skipCount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var maxResultCount=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_discover.DISCOVER_BOOKMARK_MAX_COUNT;var result=yield _apiDid.request.discover.getBookmarks({params:{skipCount:skipCount,maxResultCount:maxResultCount}});if(skipCount===0){clean();}dispatch((0,_slice.addBookmarkList)({networkType:networkType,list:result.items||[]}));return result;}),[clean,dispatch,networkType]);var bookmarkList=(0,_react.useMemo)(function(){var _discoverMap$networkT;return(discoverMap==null?void 0:(_discoverMap$networkT=discoverMap[networkType])==null?void 0:_discoverMap$networkT.bookmarkList)||[];},[discoverMap,networkType]);return{refresh:refresh,clean:clean,bookmarkList:bookmarkList};};