var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _GStyles=_interopRequireDefault(require("../../assets/theme/GStyles"));var _CommonText=require("../CommonText");var _unit=require("../../utils/unit");var _Svg=_interopRequireDefault(require("../Svg"));var _misc=require("../../packages/constants/misc");var _jsxFileName="/Users/fengfeiyang/aelf/portkey-wallet/packages/rn-sdk/android/rn-sdk-finally/src/components/Keypad/index.tsx";function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var PadEventType=function(PadEventType){PadEventType[PadEventType["ADD"]=0]="ADD";PadEventType[PadEventType["DELETE"]=1]="DELETE";PadEventType[PadEventType["RESET"]=2]="RESET";return PadEventType;}(PadEventType||{});var Keypad=(0,_react.forwardRef)(function Keypad(_ref,ref){var onChange=_ref.onChange,onBiometricsPress=_ref.onBiometricsPress,onFinish=_ref.onFinish,onRest=_ref.onRest,_ref$maxLength=_ref.maxLength,maxLength=_ref$maxLength===void 0?_misc.PIN_SIZE:_ref$maxLength,style=_ref.style,_ref$isBiometrics=_ref.isBiometrics,isBiometrics=_ref$isBiometrics===void 0?false:_ref$isBiometrics;var valueRef=(0,_react.useRef)('');var handleValueChange=(0,_react.useCallback)(function(){var _value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:PadEventType.ADD;switch(type){case PadEventType.DELETE:valueRef.current=valueRef.current.slice(0,-1);onChange&&onChange(valueRef.current);break;case PadEventType.ADD:if(valueRef.current.length<=maxLength-1){valueRef.current+=_value;onChange&&onChange(valueRef.current);}if(valueRef.current.length>=maxLength){onFinish&&onFinish(valueRef.current);}break;case PadEventType.RESET:valueRef.current='';onRest&&onRest();break;default:break;}},[maxLength,onChange,onFinish,onRest]);var reset=(0,_react.useCallback)(function(){handleValueChange('',PadEventType.RESET);},[handleValueChange]);(0,_react.useImperativeHandle)(ref,function(){return{reset:reset};});return _react.default.createElement(_reactNative.View,{style:[styles.container,style],__self:this,__source:{fileName:_jsxFileName,lineNumber:66,columnNumber:5}},_react.default.createElement(_reactNative.View,{style:[styles.padRow,_GStyles.default.marginTop(0)],__self:this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:7}},_react.default.createElement(_reactNative.TouchableOpacity,{style:styles.padBtn,onPress:function onPress(){handleValueChange('1');},__self:this,__source:{fileName:_jsxFileName,lineNumber:68,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:73,columnNumber:11}},"1")),_react.default.createElement(_reactNative.TouchableOpacity,{style:styles.padBtn,onPress:function onPress(){handleValueChange('2');},__self:this,__source:{fileName:_jsxFileName,lineNumber:75,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:11}},"2")),_react.default.createElement(_reactNative.TouchableOpacity,{style:[styles.padBtn,styles.noMarginRight],onPress:function onPress(){handleValueChange('3');},__self:this,__source:{fileName:_jsxFileName,lineNumber:82,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:87,columnNumber:11}},"3"))),_react.default.createElement(_reactNative.View,{style:styles.padRow,__self:this,__source:{fileName:_jsxFileName,lineNumber:90,columnNumber:7}},_react.default.createElement(_reactNative.TouchableOpacity,{style:styles.padBtn,onPress:function onPress(){handleValueChange('4');},__self:this,__source:{fileName:_jsxFileName,lineNumber:91,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:96,columnNumber:11}},"4")),_react.default.createElement(_reactNative.TouchableOpacity,{style:styles.padBtn,onPress:function onPress(){handleValueChange('5');},__self:this,__source:{fileName:_jsxFileName,lineNumber:98,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:103,columnNumber:11}},"5")),_react.default.createElement(_reactNative.TouchableOpacity,{style:[styles.padBtn,styles.noMarginRight],onPress:function onPress(){handleValueChange('6');},__self:this,__source:{fileName:_jsxFileName,lineNumber:105,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:110,columnNumber:11}},"6"))),_react.default.createElement(_reactNative.View,{style:styles.padRow,__self:this,__source:{fileName:_jsxFileName,lineNumber:113,columnNumber:7}},_react.default.createElement(_reactNative.TouchableOpacity,{style:styles.padBtn,onPress:function onPress(){handleValueChange('7');},__self:this,__source:{fileName:_jsxFileName,lineNumber:114,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:119,columnNumber:11}},"7")),_react.default.createElement(_reactNative.TouchableOpacity,{style:styles.padBtn,onPress:function onPress(){handleValueChange('8');},__self:this,__source:{fileName:_jsxFileName,lineNumber:121,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:126,columnNumber:11}},"8")),_react.default.createElement(_reactNative.TouchableOpacity,{style:[styles.padBtn,styles.noMarginRight],onPress:function onPress(){handleValueChange('9');},__self:this,__source:{fileName:_jsxFileName,lineNumber:128,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:133,columnNumber:11}},"9"))),_react.default.createElement(_reactNative.View,{style:styles.padRow,__self:this,__source:{fileName:_jsxFileName,lineNumber:136,columnNumber:7}},isBiometrics?_react.default.createElement(_reactNative.TouchableOpacity,{style:styles.padBtn,onPress:onBiometricsPress,__self:this,__source:{fileName:_jsxFileName,lineNumber:138,columnNumber:11}},_react.default.createElement(_Svg.default,{icon:"touch-id",oblongSize:[(0,_unit.pTd)(24),(0,_unit.pTd)(26)],__self:this,__source:{fileName:_jsxFileName,lineNumber:139,columnNumber:13}})):_react.default.createElement(_reactNative.View,{style:styles.padBtn,__self:this,__source:{fileName:_jsxFileName,lineNumber:142,columnNumber:11}}),_react.default.createElement(_reactNative.TouchableOpacity,{style:styles.padBtn,onPress:function onPress(){handleValueChange('0');},__self:this,__source:{fileName:_jsxFileName,lineNumber:144,columnNumber:9}},_react.default.createElement(_CommonText.TextXXXL,{__self:this,__source:{fileName:_jsxFileName,lineNumber:149,columnNumber:11}},"0")),_react.default.createElement(_reactNative.TouchableOpacity,{style:[styles.padBtn,styles.noMarginRight],onPress:function onPress(){handleValueChange('',PadEventType.DELETE);},__self:this,__source:{fileName:_jsxFileName,lineNumber:151,columnNumber:9}},_react.default.createElement(_Svg.default,{icon:"block-back",size:(0,_unit.pTd)(24),__self:this,__source:{fileName:_jsxFileName,lineNumber:156,columnNumber:11}}))));});var _default=exports.default=Keypad;var styles=_reactNative.StyleSheet.create({container:{},padRow:{marginTop:(0,_unit.pTd)(24),flexDirection:'row'},padBtn:{height:(0,_unit.pTd)(44),flex:1,marginRight:(0,_unit.pTd)(8),justifyContent:'center',alignItems:'center'},noMarginRight:{marginRight:0},pinStyle:{marginTop:24,width:(0,_unit.pTd)(230),alignSelf:'center'}});