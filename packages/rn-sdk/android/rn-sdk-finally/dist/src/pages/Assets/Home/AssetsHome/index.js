var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _style=require("./style");var _ReceiveButton=_interopRequireDefault(require("../../../../components/ReceiveButton"));var _CommonText=require("../../../../components/CommonText");var _FaucetButton=_interopRequireDefault(require("../../../../components/FaucetButton"));var _wallet=require("../../../../model/wallet");var _network=require("../../../../model/hooks/network");var _SendButton=_interopRequireDefault(require("../../../../components/SendButton"));var _DashBoardTab=_interopRequireDefault(require("../DashBoardTab"));var _balance=require("../../../../model/hooks/balance");var _CustomHeader=_interopRequireDefault(require("../../../../components/CustomHeader"));var _UseBaseContainer=_interopRequireDefault(require("../../../../model/container/UseBaseContainer"));var _AssetsContext=_interopRequireDefault(require("../../../../global/context/assets/AssetsContext"));var _converter=require("../../../../packages/utils/converter");var _misc=require("../../../../packages/constants/misc");var _this=this,_jsxFileName="/Users/fengfeiyang/aelf/portkey-wallet/packages/rn-sdk/android/rn-sdk-finally/src/pages/Assets/Home/AssetsHome/index.tsx";function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var AssetsHome=function AssetsHome(){var _useUnlockedWallet=(0,_wallet.useUnlockedWallet)(),wallet=_useUnlockedWallet.wallet;var networkType=(0,_network.useCurrentNetworkType)();var _useAccountTokenBalan=(0,_balance.useAccountTokenBalanceList)(),balanceList=_useAccountTokenBalan.balanceList,updateBalanceList=_useAccountTokenBalan.updateBalanceList;var _useSearchTokenList=(0,_balance.useSearchTokenList)(),tokenList=_useSearchTokenList.tokenList,updateTokensList=_useSearchTokenList.updateTokensList;var _useTokenPrices=(0,_balance.useTokenPrices)(),tokenPrices=_useTokenPrices.tokenPrices,updateTokenPrices=_useTokenPrices.updateTokenPrices;var _useNftCollections=(0,_balance.useNftCollections)(),nftCollections=_useNftCollections.nftCollections,updateNftCollections=_useNftCollections.updateNftCollections;var balanceUSD=(0,_react.useMemo)(function(){return balanceList.reduce(function(acc,item){var _tokenPrices$find;var symbol=item.symbol,balance=item.balance,decimals=item.decimals;var price=((_tokenPrices$find=tokenPrices.find(function(token){return token.symbol===symbol;}))==null?void 0:_tokenPrices$find.priceInUsd)||0;return acc.plus((0,_converter.divDecimals)(balance,decimals).times(price));},_misc.ZERO);},[balanceList,tokenPrices]);var assetsContext={balanceUSD:balanceUSD,balanceList:balanceList,updateBalanceList:updateBalanceList,allOfTokensList:tokenList,updateTokensList:updateTokensList,tokenPrices:tokenPrices,updateTokenPrices:updateTokenPrices,nftCollections:nftCollections,updateNftCollections:updateNftCollections};var isMainnet=networkType==='MAIN';var _useBaseContainer=(0,_UseBaseContainer.default)({}),onFinish=_useBaseContainer.onFinish;return _react.default.createElement(_AssetsContext.default.Provider,{value:assetsContext,__self:_this,__source:{fileName:_jsxFileName,lineNumber:52,columnNumber:5}},_react.default.createElement(_reactNative.View,{style:[_style.styles.cardWrap,_style.styles.pagePaddingTop],__self:_this,__source:{fileName:_jsxFileName,lineNumber:53,columnNumber:7}},_react.default.createElement(_CustomHeader.default,{themeType:'blue',titleDom:'',leftCallback:function leftCallback(){onFinish({status:'success',data:{finished:true}});},__self:_this,__source:{fileName:_jsxFileName,lineNumber:54,columnNumber:9}}),_react.default.createElement(_reactNative.View,{style:_style.styles.refreshWrap,__self:_this,__source:{fileName:_jsxFileName,lineNumber:66,columnNumber:9}},_react.default.createElement(_reactNative.Text,{style:_style.styles.block,__self:_this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:11}})),_react.default.createElement(_reactNative.Text,{style:_style.styles.usdtBalance,__self:_this,__source:{fileName:_jsxFileName,lineNumber:69,columnNumber:9}},isMainnet?"$"+balanceUSD.toFixed(2):'Dev Mode'),_react.default.createElement(_CommonText.TextM,{style:_style.styles.accountName,__self:_this,__source:{fileName:_jsxFileName,lineNumber:70,columnNumber:9}},wallet==null?void 0:wallet.name),_react.default.createElement(_reactNative.View,{style:_style.styles.buttonGroupWrap,__self:_this,__source:{fileName:_jsxFileName,lineNumber:71,columnNumber:9}},_react.default.createElement(_SendButton.default,{themeType:"dashBoard",__self:_this,__source:{fileName:_jsxFileName,lineNumber:79,columnNumber:11}}),_react.default.createElement(_reactNative.View,{style:_style.styles.spacerStyle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:11}}),_react.default.createElement(_ReceiveButton.default,{themeType:"dashBoard",__self:_this,__source:{fileName:_jsxFileName,lineNumber:81,columnNumber:11}}),!isMainnet&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_reactNative.View,{style:_style.styles.spacerStyle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:85,columnNumber:15}}),_react.default.createElement(_FaucetButton.default,{themeType:"dashBoard",__self:_this,__source:{fileName:_jsxFileName,lineNumber:86,columnNumber:15}})))),_react.default.createElement(_DashBoardTab.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:7}}));};var _default=exports.default=AssetsHome;