var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.authenticateBioAsync=authenticateBioAsync;exports.authenticateBioReady=authenticateBioReady;exports.isBiometricsCanUse=isBiometricsCanUse;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _expoLocalAuthentication=require("expo-local-authentication");var _core=require("../../model/verify/core");var _SetBiometrics=require("../../pages/Pin/SetBiometrics");var _reactNative=require("react-native");var _nativeModules=require("../native-modules");function authenticateBioAsync(){return _authenticateBioAsync.apply(this,arguments);}function _authenticateBioAsync(){_authenticateBioAsync=(0,_asyncToGenerator2.default)(function*(){var options={hintMessage:'Verify your identity',fallbackLabel:'Use password',promptMessage:'AELF identity authentication',disableDeviceFallback:false,requireConfirmation:false};if(_reactNative.Platform.OS==='ios'){return(0,_SetBiometrics.touchAuth)();}else{yield delay(200);return _nativeModules.PortkeyModulesEntity.BiometricModule.bioAuthenticateAsync(options);}});return _authenticateBioAsync.apply(this,arguments);}function authenticateBioReady(){return _authenticateBioReady.apply(this,arguments);}function _authenticateBioReady(){_authenticateBioReady=(0,_asyncToGenerator2.default)(function*(){if(_reactNative.Platform.OS==='ios'){return(0,_expoLocalAuthentication.isEnrolledAsync)();}else{return _nativeModules.PortkeyModulesEntity.BiometricModule.isEnrolledAsync();}});return _authenticateBioReady.apply(this,arguments);}function isBiometricsCanUse(){return _isBiometricsCanUse.apply(this,arguments);}function _isBiometricsCanUse(){_isBiometricsCanUse=(0,_asyncToGenerator2.default)(function*(){return(0,_core.getUseBiometric)();});return _isBiometricsCanUse.apply(this,arguments);}function delay(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}