var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useCheckSiteIsInBlackList=exports.useCMS=exports.useBuyButtonShow=exports.useBuyButton=void 0;exports.useDiscoverGroupList=useDiscoverGroupList;exports.useRememberMeBlackList=exports.useIsChatShow=exports.useFetchCurrentRememberMeBlackList=void 0;exports.useSocialMediaList=useSocialMediaList;exports.useTabMenuList=useTabMenuList;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _react=require("react");var _index=require("./index");var _=require("./..");var _network=require("./network");var _actions=require("packages/types/store-ca/cms/actions");var _browser=require("../../utils/dapp/browser");var _session=require("../../utils/session");var _chat=require("../../constants/constants-ca/chat");var _device=require("../../types/types-ca/device");var useCMS=exports.useCMS=function useCMS(){return(0,_index.useAppCASelector)(function(state){return state.cms;});};function useTabMenuList(){var isInit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dispatch=(0,_.useAppCommonDispatch)();var _useCMS=useCMS(),tabMenuListNetMap=_useCMS.tabMenuListNetMap;var _useCurrentNetworkInf=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf.networkType;var networkList=(0,_network.useNetworkList)();var tabMenuList=(0,_react.useMemo)(function(){return tabMenuListNetMap[networkType]||[];},[networkType,tabMenuListNetMap]);(0,_react.useEffect)(function(){if(isInit){networkList.forEach(function(item){dispatch((0,_actions.getTabMenuAsync)(item.networkType));});}},[]);(0,_react.useEffect)(function(){if(!isInit){dispatch((0,_actions.getTabMenuAsync)(networkType));}},[dispatch,isInit,networkType]);return tabMenuList;}function useSocialMediaList(){var isInit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dispatch=(0,_.useAppCommonDispatch)();var _useCMS2=useCMS(),socialMediaListNetMap=_useCMS2.socialMediaListNetMap;var _useCurrentNetworkInf2=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf2.networkType;var networkList=(0,_network.useNetworkList)();var socialMediaList=(0,_react.useMemo)(function(){return socialMediaListNetMap[networkType]||[];},[networkType,socialMediaListNetMap]);(0,_react.useEffect)(function(){if(isInit){networkList.forEach(function(item){dispatch((0,_actions.getSocialMediaAsync)(item.networkType));});}},[]);(0,_react.useEffect)(function(){if(!isInit){dispatch((0,_actions.getSocialMediaAsync)(networkType));}},[dispatch,isInit,networkType]);return socialMediaList;}function useDiscoverGroupList(){var isInit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dispatch=(0,_.useAppCommonDispatch)();var _useCMS3=useCMS(),discoverGroupListNetMap=_useCMS3.discoverGroupListNetMap;var _useCurrentNetworkInf3=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf3.networkType;var networkList=(0,_network.useNetworkList)();var discoverGroupList=(0,_react.useMemo)(function(){return discoverGroupListNetMap[networkType]||[];},[networkType,discoverGroupListNetMap]);(0,_react.useEffect)(function(){if(isInit){networkList.forEach(function(item){dispatch((0,_actions.getDiscoverGroupAsync)(item.networkType));});}},[]);(0,_react.useEffect)(function(){if(!isInit){dispatch((0,_actions.getDiscoverGroupAsync)(networkType));}},[dispatch,isInit,networkType]);return discoverGroupList||[];}var useBuyButton=exports.useBuyButton=function useBuyButton(){var isInit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dispatch=(0,_.useAppCommonDispatch)();var _useCMS4=useCMS(),buyButtonNetMap=_useCMS4.buyButtonNetMap;var _useCurrentNetworkInf4=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf4.networkType;var networkList=(0,_network.useNetworkList)();var buyButtonNet=(0,_react.useMemo)(function(){return(buyButtonNetMap==null?void 0:buyButtonNetMap[networkType])||undefined;},[networkType,buyButtonNetMap]);(0,_react.useEffect)(function(){if(isInit){networkList.forEach(function(item){dispatch((0,_actions.getBuyButtonAsync)(item.networkType));});}},[]);(0,_react.useEffect)(function(){if(!isInit){dispatch((0,_actions.getBuyButtonAsync)(networkType));}},[dispatch,isInit,networkType]);return buyButtonNet;};var useBuyButtonShow=exports.useBuyButtonShow=function useBuyButtonShow(deviceType){var buyButton=useBuyButton();var _useCurrentNetworkInf5=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf5.networkType;var isMainnet=(0,_network.useIsMainnet)();var dispatch=(0,_.useAppCommonDispatch)();var getIsBuySectionShow=(0,_react.useCallback)(function(isMainnet,buyButton,deviceType){if(!isMainnet)return false;switch(deviceType){case _device.VersionDeviceType.iOS:return(buyButton==null?void 0:buyButton.isIOSBuyShow)||false;case _device.VersionDeviceType.Android:return(buyButton==null?void 0:buyButton.isAndroidBuyShow)||false;case _device.VersionDeviceType.Extension:return(buyButton==null?void 0:buyButton.isExtensionBuyShow)||false;default:return false;}},[]);var getIsSellSectionShow=(0,_react.useCallback)(function(isMainnet,buyButton,deviceType){if(!isMainnet)return false;switch(deviceType){case _device.VersionDeviceType.iOS:return(buyButton==null?void 0:buyButton.isIOSSellShow)||false;case _device.VersionDeviceType.Android:return(buyButton==null?void 0:buyButton.isAndroidSellShow)||false;case _device.VersionDeviceType.Extension:return(buyButton==null?void 0:buyButton.isExtensionSellShow)||false;default:return false;}},[]);var isBuySectionShow=(0,_react.useMemo)(function(){return getIsBuySectionShow(isMainnet,buyButton,deviceType);},[buyButton,deviceType,getIsBuySectionShow,isMainnet]);var isSellSectionShow=(0,_react.useMemo)(function(){return getIsSellSectionShow(isMainnet,buyButton,deviceType);},[buyButton,deviceType,getIsSellSectionShow,isMainnet]);var isBuyButtonShow=(0,_react.useMemo)(function(){return isMainnet&&(isBuySectionShow||isSellSectionShow||false);},[isBuySectionShow,isMainnet,isSellSectionShow]);var refreshBuyButton=(0,_react.useCallback)((0,_asyncToGenerator2.default)(function*(){var _result$payload,_result$payload$buyBu;var result=yield dispatch((0,_actions.getBuyButtonAsync)(networkType));var buyButtonResult=result==null?void 0:(_result$payload=result.payload)==null?void 0:(_result$payload$buyBu=_result$payload.buyButtonNetMap)==null?void 0:_result$payload$buyBu[networkType];return{isBuySectionShow:getIsBuySectionShow(isMainnet,buyButtonResult,deviceType),isSellSectionShow:getIsSellSectionShow(isMainnet,buyButtonResult,deviceType)};}),[deviceType,dispatch,getIsBuySectionShow,getIsSellSectionShow,isMainnet,networkType]);return{isBuyButtonShow:isBuyButtonShow,isBuySectionShow:isBuySectionShow,isSellSectionShow:isSellSectionShow,refreshBuyButton:refreshBuyButton};};var useRememberMeBlackList=exports.useRememberMeBlackList=function useRememberMeBlackList(){var isInit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dispatch=(0,_.useAppCommonDispatch)();var _useCMS5=useCMS(),rememberMeBlackListMap=_useCMS5.rememberMeBlackListMap;var _useCurrentNetworkInf6=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf6.networkType;var networkList=(0,_network.useNetworkList)();var rememberMeBlackList=(0,_react.useMemo)(function(){var _rememberMeBlackListM;return(rememberMeBlackListMap==null?void 0:(_rememberMeBlackListM=rememberMeBlackListMap[networkType])==null?void 0:_rememberMeBlackListM.map(function(ele){return ele==null?void 0:ele.url;}))||[];},[networkType,rememberMeBlackListMap]);(0,_react.useEffect)(function(){if(isInit){networkList.forEach(function(item){dispatch((0,_actions.getRememberMeBlackListAsync)(item.networkType));});}},[]);(0,_react.useEffect)(function(){if(!isInit){dispatch((0,_actions.getRememberMeBlackListAsync)(networkType));}},[dispatch,isInit,networkType]);return rememberMeBlackList||[];};var useFetchCurrentRememberMeBlackList=exports.useFetchCurrentRememberMeBlackList=function useFetchCurrentRememberMeBlackList(){var dispatch=(0,_.useAppCommonDispatch)();var _useCurrentNetworkInf7=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf7.networkType;return(0,_react.useCallback)(function(){dispatch((0,_actions.getRememberMeBlackListAsync)(networkType));},[dispatch,networkType]);};var useCheckSiteIsInBlackList=exports.useCheckSiteIsInBlackList=function useCheckSiteIsInBlackList(){var list=useRememberMeBlackList();return(0,_react.useCallback)(function(url){return(0,_session.checkSiteIsInBlackList)(list,(0,_browser.getOrigin)(url));},[list]);};var useIsChatShow=exports.useIsChatShow=function useIsChatShow(){var _useCMS6=useCMS(),tabMenuListNetMap=_useCMS6.tabMenuListNetMap;var _useCurrentNetworkInf8=(0,_network.useCurrentNetworkInfo)(),networkType=_useCurrentNetworkInf8.networkType;var isIMServiceExist=(0,_network.useIsIMServiceExist)();var IsChatShow=(0,_react.useMemo)(function(){var tabMenuList=tabMenuListNetMap[networkType];if(!tabMenuList)return false;return isIMServiceExist&&!!tabMenuList.find(function(item){return item.type.value===_chat.ChatTabName;});},[isIMServiceExist,networkType,tabMenuListNetMap]);return IsChatShow;};